
<!--Добавление новой книги-->

<div class="parent">
  <form class="child">
    <div class="form-group">

      <label>ISBN (длина должна быть 12-13 символов)</label>
      <input type="text" class="form-control" [(ngModel)]="newBook.isbn" name="isbn" required pattern="^[0-9]+$"
             minlength="12" maxlength="13" #isbn="ngModel">
      <small class="text-danger" *ngIf="isbn.hasError('required')">
        Поле обязательно для заполнения
      </small>
      <small class="text-danger" *ngIf="isbn.hasError('pattern')">
        Использовать только цифры</small>
      <small class="text-danger" *ngIf="isbn.hasError('minlength')">
        Минимум 12 символов</small>
      <small class="text-danger" *ngIf="isbn.hasError('maxlength')">
        Минимум 13 символов</small>
    </div>

    <div class="form-group">
      <label>Название книги</label>
      <input type="text" class="form-control" [(ngModel)]="newBook.title" name="title" required #title="ngModel">
      <small class="text-danger" *ngIf="title.hasError('required')">
        Поле обязательно для заполнения
      </small>
    </div>

    <div class="form-group">
      <label>Жанр</label>
      <div class="row">
      <select type="text" class="form-control col-10" [(ngModel)]="newBook.genre" name="genre" required #genge="ngModel">
        <option *ngFor="let item of genres" [ngValue]='{"id":item.id,"name":item.name}'>{{item.name}}</option>
      </select>
      <span class="col-2" (click)="visibleAdd('жанр')">добавить</span>
    </div>
      <small class="text-danger" *ngIf="genge.hasError('required')">
        Поле обязательно для заполнения
      </small>
    </div>

    <div class="form-group">
      <label>Автор книги</label>
      <div class="row">
        <select type="text" class="form-control col-10" [(ngModel)]="newBook.author" name="autor" required #autor="ngModel">
          <option *ngFor="let item of authors" [ngValue]='{"id":item.id,"name":item.name}'>{{item.name}}</option>
        </select>
        <span class="col-2" (click)="visibleAdd('автора')">добавить</span>
      </div>
      <small class="text-danger" *ngIf="autor.hasError('required')">
        Поле обязательно для заполнения
      </small>
    </div>

    <div class="form-group">
      <label>Год выпуска</label>
      <input type="text" class="form-control" [(ngModel)]="newBook.year" name="year" required pattern="^[0-9]+$"
             #year="ngModel" placeholder="Введите год выпуска книги">
      <small class="text-danger" *ngIf="year.hasError('required')">
        Поле обязательно для заполнения
      </small>
      <small class="text-danger" *ngIf="isbn.hasError('pattern')">
        Использовать только цифры</small>
    </div>

    <div class="form-group">
      <label>Язык написания книги</label>
      <div class="row">
      <select type="text" class="form-control col-10" [(ngModel)]="newBook.lang" name="lang" required #lang=ngModel>
        <option *ngFor="let item of languages" [ngValue]='{"id":item.id,"name":item.name}'>{{item.name}}</option>
      </select>
      <span class="col-2" (click)="visibleAdd('язык')">добавить</span>
    </div>
      <small class="text-danger" *ngIf="lang.hasError('required')">
        Поле обязательно для заполнения
      </small>
    </div>

    <div class="form-group">
      <label>Издатель</label>
      <div class="row">
      <select type="text" class="form-control col-10" [(ngModel)]="newBook.publisher" name="publisher" required
              #publisher="ngModel">
        <option *ngFor="let item of publishers" [ngValue]='{"id":item.id,"name":item.name}'>{{item.name}}</option>
      </select>
      <span class="col-2" (click)="visibleAdd('издателя')">добавить</span>
    </div>
      <small class="text-danger" *ngIf="publisher.hasError('required')">
        Поле обязательно для заполнения
      </small>
    </div>

    <div class="form-group">
      <label>Описание</label>
      <textarea class="form-control" rows="3" [(ngModel)]="newBook.description"
                name="description"></textarea>
    </div>

    <button
      [disabled]="isbn.errors || title.errors || genge.errors || autor.errors || year.errors || lang.errors || publisher.errors"
      type="submit" class="btn btn-primary" (click)="addNewBook()">Submit
    </button>
  </form>
</div>

<!--Добавление дополнительных зависимостей-->

<div class="parent addNew" *ngIf="visible">
  <span (click)="visible = false">закрыть</span>
  <form class="child">
    <div class="form-group">
      <label>Добавить {{addNew}} книги</label>
      <input type="text" class="form-control" [(ngModel)]="newName" name="newname" required #newname="ngModel">
      <small class="text-danger" *ngIf="newname.hasError('required')">
        Поле обязательно для заполнения
      </small>
    </div>

    <div class="form-group" *ngIf="addNew == 'издателя'">
      <label>Описание</label>
      <textarea class="form-control" rows="3" [(ngModel)]="newText"
                name="description"></textarea>
    </div>

    <button
      type="submit" [disabled]="newname.errors" class="btn btn-primary" (click)="addNewObject()">Submit
    </button>
  </form>
</div>
